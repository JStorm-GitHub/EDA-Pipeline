#@ # 
#@ # Running icc_shell Version Q-2019.12 for linux64 -- Nov 26, 2019
#@ # Date:   Tue May 16 20:31:07 2023
#@ # Run by: js4684@xunil-03.coe.drexel.edu
#@ 

set file_name s386; set foo_bar 43
source -echo -verbose /home/js4684@drexel.edu/SeniorDesign/eda-pipeline/Outputs/synopsys_s386_1/scripts/run.tcl
#@ # -- Starting source /home/js4684@drexel.edu/SeniorDesign/eda-pipeline/Outputs/synopsys_s386_1/scripts/run.tcl

#@ source scripts/0_init.tcl
#@ # -- Starting source scripts/0_init.tcl

#@ set search_path "$search_path /mnt/class_data/ecec574-w2019/PDKs/SAED32nm/lib/stdcell_rvt/db_ccs
#@ ../src/ "
#@ set target_library "saed32rvt_ss0p95v25c.db"
#@ set link_library "* $target_library"
#@ set techfile "/mnt/class_data/ecec574-w2019/PDKs/SAED32nm/tech/milkyway/saed32nm_1p9m_mw.tf"
#@ set ref_lib "/mnt/class_data/ecec574-w2019/PDKs/SAED32nm/lib/stdcell_rvt/milkyway/saed32nm_rvt_1p9m"
#@ set lib_name "${file_name}"
#@ set mw_logic0_net VSS
#@ set mw_logic1_net VDD_
#@ create_mw_lib $lib_name.mw -technology $techfile -mw_reference_library $ref_lib 
#@ open_mw_lib $lib_name.mw
#@ 
#@ set design_data logical_synthesis/outputs/${file_name}.ddc
#@ set cell_name "${file_name}"
#@ import_designs $design_data -format ddc -top $cell_name
#@ 
#@ set libdir "/mnt/class_data/ecec574-w2019/PDKs/SAED32nm/tech/star_rcxt"
#@ set tlupmax "$libdir/saed32nm_1p9m_Cmax.tluplus"
#@ set tlunom "$libdir/saed32nm_1p9m_nominal.tluplus"
#@ set tlupmin "$libdir/saed32nm_1p9m_Cmin.tluplus"
#@ set tech2itf "$libdir/saed32nm_tf_itf_tluplus.map"
#@ set_tlu_plus_files -max_tluplus $tlunom -tech2itf_map $tech2itf
#@ 
#@ read_verilog logical_synthesis/outputs/${file_name}.v
#@ uniquify_fp_mw_cel
#@ link
#@ read_sdc logical_synthesis/outputs/${file_name}.sdc
#@ # -- Starting source /mnt/class_data/ecec574-w2019/tools/icc/icc/Q-2019.12/auxx/syn/all_command_option_def.tcl

#@ define_proc_attributes all_physical_only_cells -info "Get the collection of physical only cells" -define_args {
#@ { -coordinates "coordinates of bounding box" "llx lly urx ury" string {optional}} 
#@ { -lib_cells "get cells related to these objects" "objects" list {optional}} 
#@ { -cell_name "list of cell name patterns and collections" "patterns" list {optional}} 
#@ { "" "Existing collection" "arguments" list {optional}} 
#@ }
#@ define_proc_attributes all_physical_only_nets  -info "Get the collection of physical only nets" -define_args {
#@ { "" "list of cell name patterns and collections" "arguments" list {optional}} 
#@ } 
#@ define_proc_attributes all_drc_violated_nets -info "Returns all DRC violated nets" -define_args { 
#@ { -max_capacitance "max Cap DRC violated nets" "" string {optional}} 
#@ { -max_transition "max transition time DRC violated nets" "" string {optional}} 
#@ { -max_fanout "max fanout DRC violated nets" "" string {optional}}
#@ { -threshold "Captures all values more than or equal to threshold" "threshold" string {optional}} 
#@ { -bound "Captures all values less than or equal to bound bound" "upper" string {optional}} 
#@ { "" "objects patterns OR collection" "arguments"  list {optional}} 
#@ }
#@ define_proc_attributes all_fanin -info "return pins or cells in transitive fanin" -define_args { 
#@ { -to "set of sink ports, pins, or nets" "sink_list" list {optional}} 
#@ { -startpoints_only  "return only the timing startpoints" "" string {optional}} 
#@ { -exclude_bboxes "black-boxes are not included in return-set" "" string {optional}} 
#@ { -break_on_bboxes  "traversal stops at black-boxes" "" string {optional}} 
#@ { -only_cells "only cells are included in the return-set" "" string {optional}} 
#@ { -flat "trace entire design instead of just current hierarchy" "" string {optional}} 
#@ { -levels "maximum number of levels of logic to traverse" "n" string {optional}} 
#@ { -trace_arcs "Type of network arcs to trace. Values: timing, all" "arc_type" string {optional}}
#@ }
#@ define_proc_attributes all_high_fanout -info "Returns all high fanout objects" -define_args { 
#@ { -nets "high fanout nets" "" string {optional}} 
#@ { -threshold "high fanout threshold: value>=0" "threshold" string {optional}} 
#@ { -through_buf_inv "treat buffers and inverters as transparent -check for transitive fanout" "" string {optional}} 
#@ { "" "objects patterns OR collection" "arguments" string {optional}} 
#@ }
#@ define_proc_attributes all_ideal_nets -info "Returns all ideal nets" -define_args { 
#@ { "" "objects patterns OR collection" "arguments" string {optional}} 
#@ }
#@ define_proc_attributes all_inputs -info "return input ports" -define_args { 
#@ { -clock "ports with input delay relative to clock" "clock" string {optional}} 
#@ { -edge_triggered "ports with non-level-sensitive input delay" "" string {optional}} 
#@ { -level_sensitive "ports with level-sensitive input delay" "" string {optional}} 
#@ }
#@ define_proc_attributes all_outputs -info "return output ports" -define_args { 
#@ { -clock "ports with output delay relative to clock" "clock" string {optional}} 
#@ { -edge_triggered "ports with non-level-sensitive output delay" "" string {optional}} 
#@ { -level_sensitive "ports with level-sensitive output delay" "" string {optional}} 
#@ }
#@ define_proc_attributes all_threestate -info "Returns all threestate objects" -define_args { 
#@ { -nets "threestate nets" "" string {optional}} 
#@ { "" "objects patterns OR collection" "arguments" string {optional}} 
#@ }
#@ define_proc_attributes all_dont_touch -info "Returns all dont touch objects" -define_args { 
#@ { -nets "Dont touch nets" "" string {optional}} 
#@ { -cells "Dont touch cells" "" string {optional}} 
#@ { "" "Dont touch patterns OR collections" "patterns" string {optional}} 
#@ }
#@ define_proc_attributes all_size_only_cells -info "Returns all size_only cells" -define_args { 
#@ { "" "Object patterns OD collections" "patterns" string {optional}} 
#@ }
#@ define_proc_attributes all_clocks -info "return all clocks in the current design"  
#@ define_proc_attributes all_designs -info "return all designs" 
#@ define_proc_attributes all_registers  -info "create a collection of register cells or pins" -define_args { 
#@ { -no_hierarchy "only search the top level of hierarchy" "" string {optional}} 
#@ {-rise_clock "return registers triggered by rise edge of this clock" "rise_clock" string {optional}}
#@ {-fall_clock "return registers triggered by rise edge of this clock" "fall_clock" string {optional}}
#@ { -clock "return registers of this clock" "clock" string {optional}} 
#@ { -cells "return cells - this is the default" "" string {optional}} 
#@ { -data_pins "return data_pins" "" string {optional}} 
#@ { -clock_pins "return clock_pins" "" string {optional}} 
#@ { -slave_clock_pins "return slave_clock_pin" "" string {optional}} 
#@ { -inverted_output "return FF's with inverted output phase" "" string {optional}} 
#@ { -output_pins "return output_pins" "" string {optional}} 
#@ { -level_sensitive "only consider level sensitive registers" "" string {optional}} 
#@ { -edge_triggered "only consider edge triggered register" "" string {optional}} 
#@ { -master_slave "only consider master/slave registers" "" string {optional}} 
#@ }
#@ define_proc_attributes all_critical_cells -info "return critical cells" -define_args { 
#@ { -slack_range "critical range to select cells:value>=0" "range_value" string {optional}} 
#@ }
#@ define_proc_attributes all_critical_pins -info "return critical pins" -define_args { 
#@ { -slack_range "critical range to select cells:value>=0" "range_value" string {optional}} 
#@ { -type "pintype: Values: endpoint, startpoint" "pin_type" string {optional}} 
#@ }
#@ define_proc_attributes get_magnet_cells -info "return magnet cells collection" -define_args {
#@ { -stop_by_sequential_cells "don't pull sequential cells" "" string {optional}} 
#@ { -exclude_buffers "skip through buffers in levels" "" string {optional}} 
#@ { -exclude_cells "list of excluded cells list" "" string {optional}}
#@ { -logical_level "number of logical levels to pull for placement" "integer" string {optional}} 
#@ { -stop_points "list of stop points where to stop magnetizing paths" "object_list" list {optional}} 
#@ { "" "a list of magnet objects" "magnet_objects" list {optional}} 
#@ }
#@ define_proc_attributes all_fanout -info "return pins or cells in transitive fanout" -define_args {
#@ {-clock_tree "return all clock tree components in design" "" string {optional}}
#@ {-from "set of source ports, pins, or nets" "source_list" list {optional}}
#@ {-endpoints_only "return only the timing endpoints" "" string {optional}}
#@ {-exclude_bboxes "black-boxes are not included in return-set" "" string {optional}}
#@ {-break_on_bboxes "traversal stops at black-boxes" "" string {optional}}
#@ {-only_cells "only cells are included in the return-set" "" string {optional}}
#@ {-flat "trace entire design instead of just current hierarchy" "" string {optional}}
#@ {-levels "maximum number of levels of logic to traverse" "n" string {optional}}
#@ {-trace_arcs "Type of network arcs to trace. Values: timing, all" "arc_type" string {optional}}
#@ }
#@ define_proc_attributes all_physical_only_ports -info " Get the collection of physical only ports" -define_args {
#@ {"" "list of cell name patterns and collections" "arguments" list {optional}}
#@ }
#@ define_proc_attributes get_matching_nets_for_pattern -info "Get matched nets for a certain net pattern" -define_args { 
#@ { -pattern "pattern id" "integer" string {optional}} 
#@ { -optimizable "Return all nets that can be optimized" "" string {optional}} 
#@ { -transition_lower_limit "nets with transition equal or greater than lower limit" "lower_limit" string {optional}} 
#@ { -transition_upper_limit "nets with transition less than upper limit" "upper_limit" string {optional}} 
#@ { -setup_slack_lower_limit "nets with slack equal or greater than lower limit" "lower_limit" string {optional}} 
#@ { -setup_slack_upper_limit "nets with slack less than upper limit" "upper_limit" string {optional}} 
#@ { -hold_slack_lower_limit "nets with hold slack equal or greater than lower limit" "lower_limit" string {optional}} 
#@ { -hold_slack_upper_limit "nets with hold slack less than upper limit" "upper_limit" string {optional}} 
#@ }
#@ # -- End source /mnt/class_data/ecec574-w2019/tools/icc/icc/Q-2019.12/auxx/syn/all_command_option_def.tcl

#@ # -- End source scripts/0_init.tcl

#@ source scripts/1_floorplan.tcl
#@ # -- Starting source scripts/1_floorplan.tcl

#@ create_floorplan -core_utilization 0.6     -left_io2core 5 -bottom_io2core 5 -right_io2core 5 -top_io2core 5
#@ derive_pg_connection -power_net VDD_ -ground_net VSS
#@ derive_pg_connection -power_net VDD_ -ground_net VSS -tie
#@ 
#@ ##Create VSS ring
#@ create_rectangular_rings  -nets  {VSS}      -left_offset 0.5  -left_segment_layer M6 -left_segment_width 1.0 -extend_ll -extend_lh     -right_offset 0.5 -right_segment_layer M6 -right_segment_width 1.0 -extend_rl -extend_rh     -bottom_offset 0.5  -bottom_segment_layer  M7 -bottom_segment_width 1.0 -extend_bl -extend_bh     -top_offset 0.5 -top_segment_layer M7 -top_segment_width 1.0 -extend_tl -extend_th
#@ 
#@ ## Create VDD Ring
#@ create_rectangular_rings  -nets  {VDD_}      -left_offset 1.8  -left_segment_layer M6 -left_segment_width 1.0 -extend_ll -extend_lh     -right_offset 1.8 -right_segment_layer M6 -right_segment_width 1.0 -extend_rl -extend_rh     -bottom_offset 1.8  -bottom_segment_layer M7 -bottom_segment_width 1.0 -extend_bl -extend_bh     -top_offset 1.8 -top_segment_layer M7 -top_segment_width 1.0 -extend_tl -extend_th
#@ 
#@ ## Creates Power Strap 
#@ create_power_strap -nets { VDD_ } -layer M6 -direction vertical -width 3  
#@ create_power_strap -nets { VSS } -layer M6 -direction vertical  -width 3
#@ 
#@ report_qor > floorplan/reports/${file_name}_floorplan_qor.rpt
#@ report_power > floorplan/reports/${file_name}_place_power.rpt
#@ # -- End source scripts/1_floorplan.tcl

#@ source scripts/2_placement.tcl
#@ # -- Starting source scripts/2_placement.tcl

#@ set_buffer_opt_strategy -effort low
#@ set_tlu_plus_files     -max_tluplus /mnt/class_data/ecec574-w2019/PDKs/SAED32nm/tech/star_rcxt/saed32nm_1p9m_Cmax.tluplus     -min_tluplus /mnt/class_data/ecec574-w2019/PDKs/SAED32nm/tech/star_rcxt/saed32nm_1p9m_Cmin.tluplus     -tech2itf_map /mnt/class_data/ecec574-w2019/PDKs/SAED32nm/tech/star_rcxt/saed32nm_tf_itf_tluplus.map
#@ place_opt -congestion
#@ 
#@ ### Reports 
#@ 
#@ report_placement_utilization > placed/reports/${file_name}_place_util.rpt
#@ report_qor_snapshot > placed/reports/${file_name}_place_qor_snapshot.rpt
#@ report_qor > placed/reports/${file_name}_place_qor.rpt
#@ report_power > placed/reports/${file_name}_place_power.rpt
#@ 
#@ report_timing -delay max -max_paths 20 > placed/reports/${file_name}_place.setup.rpt
#@ report_timing -delay min -max_paths 20 > placed/reports/${file_name}_place.hold.rpt
#@ # -- End source scripts/2_placement.tcl

#@ source scripts/3_cts.tcl
#@ # -- Starting source scripts/3_cts.tcl

#@ clock_opt -clock_trees {ideal_clock1}
#@ 
#@ ### Reports 
#@ report_placement_utilization > cts/reports/${file_name}_cts_util.rpt
#@ report_qor_snapshot > cts/reports/${file_name}_cts_qor_snapshot.rpt
#@ report_qor > cts/reports/${file_name}_cts_qor.rpt
#@ report_power > cts/reports/${file_name}_cts_power.rpt
#@ 
#@ 
#@ report_timing -max_paths 20 -delay max > cts/reports/${file_name}_cts.setup.rpt
#@ report_timing -max_paths 20 -delay min > cts/reports/${file_name}_cts.hold.rpt
#@ # -- End source scripts/3_cts.tcl

#@ source scripts/4_routing.tcl
#@ # -- Starting source scripts/4_routing.tcl

#@ set_route_mode_options -zroute true
#@ route_opt -effort low 
#@ 
#@ ### Reports 
#@ report_placement_utilization > routed/reports/${file_name}_route_util.rpt
#@ report_qor_snapshot > routed/reports/${file_name}_route_qor_snapshot.rpt
#@ report_qor > routed/reports/${file_name}_route_qor.rpt
#@ report_power > routed/reports/${file_name}_route_power.rpt
#@ 
#@ 
#@ report_timing -max_paths 50 -delay max > routed/reports/${file_name}_route.setup.rpt
#@ report_timing -max_paths 50 -delay min > routed/reports/${file_name}_route.hold.rpt
#@ # -- End source scripts/4_routing.tcl

#@ source scripts/5_extract_final.tcl
#@ # -- Starting source scripts/5_extract_final.tcl

#@ ###########################################################################
#@ ### Extraction
#@ ###########################################################################
#@ 
#@ extract_rc  -coupling_cap  -routed_nets_only  -incremental
#@ 
#@ ## write parasitic to a file for delay calculations tools (e.g PrimeTime).
#@ write_parasitics -output extracted/outputs/${file_name}_extracted.spef -format SPEF
#@ 
#@ ## Write Standard Delay Format (SDF) back-annotation file
#@ write_sdf extracted/outputs/${file_name}_extracted.sdf
#@ 
#@ ## Write out a script in Synopsys Design Constraints format
#@ write_sdc extracted/outputs/${file_name}_extracted.sdc -version 2.0
#@ 
#@ ## Write out a hierarchical Verilog file for the current design, extracted from layout
#@ write_verilog extracted/outputs/${file_name}_extracted.v
#@ 
#@ ##Save the cel and report timing
#@ report_timing -max_paths 50 -delay max > extracted/reports/${file_name}_extracted.setup.rpt
#@ report_timing -max_paths 50 -delay min > extracted/reports/${file_name}_extracted.hold.rpt
#@ 
#@ save_mw_cel -as ${file_name}_extracted
#@ 
#@ ###########################################################################
#@ ### Generate relevant final reports
#@ ###########################################################################
#@ 
#@ report_qor > final/reports/${file_name}_final_qor.rpt
#@ report_timing > final/reports/${file_name}_final_timing.rpt
#@ report_power > final/reports/${file_name}_final_power.rpt
#@ report_cell > final/reports/${file_name}_final_cells.rpt
#@ report_clock_tree -summary > final/reports/${file_name}_final_ct.rpt
#@ 
#@ exit
